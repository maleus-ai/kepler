# Test global timeout as fallback for dependency waits
# Backend depends on database being healthy, but database never becomes healthy.
# The global timeout should kick in as fallback.

kepler:
  timeout: 2s
  logs:
    buffer_size: 0

services:
  database:
    command: ["sh", "-c", "echo DATABASE_STARTED; sleep 300"]
    healthcheck:
      test: ["false"]  # Always fails
      interval: 500ms
      timeout: 1s
      retries: 1
      start_period: 0s

  backend:
    command: ["sh", "-c", "echo BACKEND_STARTED; sleep 300"]
    depends_on:
      database:
        condition: service_healthy
        # No per-dep timeout â€” should fall back to kepler.timeout (2s)
